\documentclass[11pt]{article}
\input shared.texm
\def\graybg{lightgray}

%circle of a given color with text
\def\NODE(#1,#2)#3#4#5{%
\cnode[fillstyle=solid,fillcolor=#4](#1,#2){0.23}{#3}\rput(#1,#2){#5}}%
%silen state
\def\SNODE(#1,#2)#3#4{%
\cnode[fillstyle=solid,fillcolor=#4](#1,#2){0.1}{#3}}%

\def\BNODE(#1,#2)#3#4#5{%
\fnode[linecolor=#4,fillstyle=solid,fillcolor=#4,framesize=0.5](#1,#2){#3}\rput(#1,#2){#5}}%

%centered text in a box of given size
\def\centeredtext#1#2{%
\begin{minipage}{#1}\begin{centering}%
#2%
\end{centering}\end{minipage}}

\startfile
\psset{unit=1.5cm}%
\psset{linewidth=0.7pt}%
\psset{arrowsize=1.8pt 4}%
\begin{pspicture}(-1.0,-1.6)(2.7,1.7)
\psset{arrows=->}
\def\xa{1.1}
\def\xb{2.2}
\def\xc{3.3}
\def\xd{4}

\NODE(0,0){white1}{white}{$w_1$}
\nccircle[angle=135]{white1}{0.23}\bput[0.02]{0}{$0.25$}
%\BNODE(0,-1){ewhite1}{white}{$\{0\}$}
%\ncline{white1}{ewhite1}

\NODE(0,1){white2}{white}{$w_2$}
\nccircle[angle=45]{white2}{0.23}\bput[0.02]{0}{$0.25$}
%\BNODE(1,0){ewhite2}{white}{$\{0\}$}
%\ncline{white2}{ewhite2}

\ncarc[angle=-90]{white1}{white2}
\naput{0.25}
\ncarc[angle=-90]{white2}{white1}
\naput{0.25}

\NODE(0,-1){black}{gray}{$b$}
\nccircle[angle=135]{black}{0.23}\bput[0.02]{0}{$p$}

\NODE(2,0){end}{gray}{$e$}
\nccircle[angle=-45]{end}{0.23}\bput[0.02]{0}{$1$}

\ncline{white1}{end}\naput{$0.5$}
\ncline{white2}{end}\naput{$0.5$}
\ncline{black}{end}\nbput{$(1-p)$}

%\ncarc[angle=-90]{random}{exone}
%\naput{0.005}
%\ncarc[angle=-90]{exone}{random}
%\naput{0.01}

%\ncline{random}{intron}
%\naput{0.005}
%\ncarc[angle=-90]{intron}{random}
%\naput{0}

%\ncarc[angle=-90]{exone}{intron}
%\naput{0.07}
%\ncarc[angle=-90]{intron}{exone}
%\naput{0.05}


%\nccircle[angle=-45]{random}{0.23}\bput[0.02]{0}{$0.99$}
%\nccircle[angle=-45]{exone}{0.23}\bput[0.02]{0}{$0.92$}
%\nccircle[angle=45]{intron}{0.23}\bput[0.02]{0}{$0.95$}

%
%\ncline{start}{bstart}
%\ncline{bstart}{hash}
%\ncline{hash}{bfinal}
%\ncline{bfinal}{final}
%
%\nccircle[angle=0]{start}{0.23}\bput[0.02]{0}{}
%\nccircle[angle=0]{final}{0.23}\bput[0.02]{0}{}
%
%\NODE(-1,-1){0}{white}{$0$}
%\BNODE(-1,-2){e0}{white}{$\{0,?\}$}
%\ncline{0}{e0}
%
%\NODE(1,-1){1}{white}{$1$}
%\BNODE(1,-2){e1}{white}{$\{1,?\}$}
%\ncline{1}{e1}
%
%
%\ncline{hash}{0}
%\ncline{0}{hash}
%\ncline{hash}{1}
%\ncline{1}{hash}
%
%\ncline{final}{error}

\end{pspicture}
\endfile

